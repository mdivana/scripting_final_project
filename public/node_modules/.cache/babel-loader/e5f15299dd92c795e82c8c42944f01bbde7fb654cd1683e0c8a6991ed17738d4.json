{"ast":null,"code":"const reducer = (state, action) => {\n  if (action.type === 'CLEAR_CART') {\n    return {\n      ...state,\n      cart: []\n    };\n  }\n  if (action.type === 'REMOVE') {\n    return {\n      ...state,\n      cart: state.cart.filter(cartItem => cartItem.id !== action.payload)\n    };\n  }\n  if (action.type === 'INCREASE') {\n    let tempCart = state.cart.map(cartItem => {\n      if (cartItem.id === action.payload) {\n        return {\n          ...cartItem,\n          amount: cartItem.amount + 1\n        };\n      }\n      return cartItem;\n    });\n    return {\n      ...state,\n      cart: tempCart\n    };\n  }\n  if (action.type === 'DECREASE') {\n    let tempCart = state.cart.map(cartItem => {\n      if (cartItem.id === action.payload) {\n        return {\n          ...cartItem,\n          amount: cartItem.amount - 1\n        };\n      }\n      return cartItem;\n    }).filter(cartItem => cartItem.amount !== 0);\n    return {\n      ...state,\n      cart: tempCart\n    };\n  }\n  if (action.type === 'GET_TOTALS') {\n    let {\n      total,\n      amount\n    } = state.cart.reduce((cartTotal, cartItem) => {\n      const {\n        price,\n        amount\n      } = cartItem;\n      const itemTotal = price * amount;\n      cartTotal.total += itemTotal;\n      cartTotal.amount += amount;\n      return cartTotal;\n    }, {\n      total: 0,\n      amount: 0\n    });\n    total = parseFloat(total.toFixed(2));\n    return {\n      ...state,\n      total,\n      amount\n    };\n  }\n  if (action.type === 'LOADING') {\n    return {\n      ...state,\n      loading: true\n    };\n  }\n  if (action.type === 'DISPLAY_ITEMS') {\n    return {\n      ...state,\n      cart: action.payload,\n      loading: false\n    };\n  }\n  if (action.type === 'TOGGLE_AMOUNT') {\n    let tempCart = state.cart.map(cartItem => {\n      if (cartItem.id === action.payload.id) {\n        if (action.payload.type === 'inc') {\n          return {\n            ...cartItem,\n            amount: cartItem.amount + 1\n          };\n        }\n        if (action.payload.type === 'dec') {\n          return {\n            ...cartItem,\n            amount: cartItem.amount - 1\n          };\n        }\n      }\n      return cartItem;\n    }).filter(cartItem => cartItem.amount !== 0);\n    return {\n      ...state,\n      cart: tempCart\n    };\n  }\n  throw new Error('no matching action type');\n};\nexport default reducer;","map":{"version":3,"names":["reducer","state","action","type","cart","filter","cartItem","id","payload","tempCart","map","amount","total","reduce","cartTotal","price","itemTotal","parseFloat","toFixed","loading","Error"],"sources":["/Users/nikamdivani/KIU/Semester_2/SL/hw8/src/reducer.js"],"sourcesContent":["const reducer = (state, action) => {\n    if (action.type === 'CLEAR_CART') {\n      return { ...state, cart: [] }\n    }\n    if (action.type === 'REMOVE') {\n      return {\n        ...state,\n        cart: state.cart.filter((cartItem) => cartItem.id !== action.payload),\n      }\n    }\n    if (action.type === 'INCREASE') {\n      let tempCart = state.cart.map((cartItem) => {\n        if (cartItem.id === action.payload) {\n          return { ...cartItem, amount: cartItem.amount + 1 }\n        }\n        return cartItem\n      })\n      return { ...state, cart: tempCart }\n    }\n    if (action.type === 'DECREASE') {\n      let tempCart = state.cart\n        .map((cartItem) => {\n          if (cartItem.id === action.payload) {\n            return { ...cartItem, amount: cartItem.amount - 1 }\n          }\n          return cartItem\n        })\n        .filter((cartItem) => cartItem.amount !== 0)\n      return { ...state, cart: tempCart }\n    }\n    if (action.type === 'GET_TOTALS') {\n      let { total, amount } = state.cart.reduce(\n        (cartTotal, cartItem) => {\n          const { price, amount } = cartItem\n          const itemTotal = price * amount\n  \n          cartTotal.total += itemTotal\n          cartTotal.amount += amount\n          return cartTotal\n        },\n        {\n          total: 0,\n          amount: 0,\n        }\n      )\n      total = parseFloat(total.toFixed(2))\n  \n      return { ...state, total, amount }\n    }\n    if (action.type === 'LOADING') {\n      return { ...state, loading: true }\n    }\n    if (action.type === 'DISPLAY_ITEMS') {\n      return { ...state, cart: action.payload, loading: false }\n    }\n    if (action.type === 'TOGGLE_AMOUNT') {\n      let tempCart = state.cart\n        .map((cartItem) => {\n          if (cartItem.id === action.payload.id) {\n            if (action.payload.type === 'inc') {\n              return { ...cartItem, amount: cartItem.amount + 1 }\n            }\n            if (action.payload.type === 'dec') {\n              return { ...cartItem, amount: cartItem.amount - 1 }\n            }\n          }\n          return cartItem\n        })\n        .filter((cartItem) => cartItem.amount !== 0)\n      return { ...state, cart: tempCart }\n    }\n    throw new Error('no matching action type')\n  }\n  \n  export default reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}